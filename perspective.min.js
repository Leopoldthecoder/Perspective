var perspective={};perspective.hover=function(a){var b,d,e;for(a=void 0===arguments[0]?!0:arguments[0],b=[],d=document.getElementsByTagName("div"),e=0;e<d.length;e++)"hover"===d[e].getAttribute("data-perspective")&&b.push(d[e]);for(e=0;e<b.length;e++)!function(c){function j(a){for(var b=0;h>b;b++)a(b)}function k(a,b,c){var e,d=["webkitTransform","msTransform","transform"];for(e=0;e<d.length;e++)a.style[d[e]]="translate("+b+"px,"+c+"px)"}function l(a,b,c,d){var e=Math.floor(d*(.5*document.body.clientWidth-b)),f=Math.floor(d*(.5*document.body.clientHeight-c));k(a,e,f)}var g,h,i,d=[],e=b[c],f=[];for(g=0;g<e.childNodes.length;g++)1==e.childNodes[g].nodeType&&(d.push(e.childNodes[g]),null!==e.childNodes[g].getAttribute("data-hover-speed")&&f.push(e.childNodes[g].getAttribute("data-hover-speed")));if(h=d.length,i=!1,f.length<h)for(g=f.length;h>g;g++)f.push(.2);e.onmousemove=function(a){i||j(function(b){l(d[b],a.clientX,a.clientY,f[b])})},e.onmouseout=function(b){if(a){var c=this.compareDocumentPosition(b.relatedTarget);20!=c&&0!=c&&(j(function(a){d[a].style.transition="0.1s"}),i||j(function(a){k(d[a],0,0)}))}},e.onmouseover=function(a){var b=this.compareDocumentPosition(a.relatedTarget);20!=b&&0!=b&&(i=!0,j(function(b){d[b].style.transition="0.1s",l(d[b],a.clientX,a.clientY,f[b])}),setTimeout(function(){i=!1,j(function(a){d[a].style.transition="0s"})},100))}}(e)},perspective.scroll=function(){function n(a){var d,e,b="rgb(",c=a.toLowerCase();if(4===c.length){for(d="#",e=1;4>e;e++)d+=c.slice(e,e+1).concat(c.slice(e,e+1));c=d}for(e=1;4>e;e++)b+=parseInt("0x"+c.slice(2*e-1,2*e+1)).toString(),3>e&&(b+=",");return b+=")"}function v(a){w(a,0),s=a?t[a-1]:a,x(s,!0)}function w(a,c){var g,e=b[a],f=document.getElementById("persp-controller").getElementsByTagName("li");for(d=!0,1===c&&a++,e.target.parentNode.style.transition="0.5s",e.target.parentNode.style.top="-"+100*a+"%",setTimeout(function(){d=!1},500),g=0;g<f.length;g++)!function(b){var c=f[b].getElementsByTagName("div")[0];b!==a?(c.style.backgroundColor="transparent",c.onmouseover=function(){c.style.backgroundColor="#999",c.parentNode.getElementsByTagName("span")[0].style.display="inline-block",c.parentNode.getElementsByTagName("span")[0].style.opacity="1"},c.onmouseout=function(){c.style.backgroundColor="transparent",c.parentNode.getElementsByTagName("span")[0].style.opacity="0",setTimeout(function(){c.parentNode.getElementsByTagName("span")[0].style.display="none"},200)},c.onclick=function(){v(b)}):(c.style.backgroundColor="#999",c.onmouseover=function(){return!1},c.onmouseout=function(){c.style.backgroundColor="#999",c.parentNode.getElementsByTagName("span")[0].style.opacity="0",setTimeout(function(){c.parentNode.getElementsByTagName("span")[0].style.display="none"},200)},c.onclick=function(){return!1})}(g)}function x(a,c){var h,i,e=0,f={},g=0;for(h=0;h<t.length;h++)a>=t[h]&&e++;for(f=b[e],h=0;e>h;h++)g+=b[h].sLength+1;if(!c&&!d||c){if(c)for(h=0;h<f.childCount;h++)f.layers[h].style.transition="0s";else d=!0,setTimeout(function(){d=!1},1e3*f.sDuration);for(h=0;h<f.childCount;h++)for(i=0;i<f.attr[h].length;i++)f.layers[h].style[f.attr[h][i]]=f.prop[h][i][a-g]}c&&setTimeout(function(){for(h=0;h<f.childCount;h++)f.layers[h].style.transition=f.sDuration+"s"},50)}function y(a){var b,c,e;if(!d){if(b=a.wheelDelta?a.wheelDelta:-a.detail,c=!1,0>b&&s===u||b>0&&0===s)return!1;for(0>b&&s++,b>0&&s--,e=0;e<t.length;e++){if(0>b&&s===t[e]){w(e,1),x(s,!0),c=!0;break}if(b>0&&s===t[e]-1){w(e,-1),x(s,!0),c=!0;break}}c||x(s,!1)}return!1}var f,g,h,i,j,k,l,o,p,q,r,s,t,u,z,A,B,C,a=document.getElementsByTagName("div"),b=[],c=/-?\d+(?:\.\d+)?/g,d=!1,e=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;for(f=0;f<a.length;f++)if("scroll"===a[f].getAttribute("data-perspective"))for(g=a[f],h=0;h<g.childNodes.length;h++)if(1==g.childNodes[h].nodeType)for(i=g.childNodes[h],j=[],k=0;k<i.childNodes.length;k++)1==i.childNodes[k].nodeType&&j.push(i.childNodes[k]);for(l=j.length,f=0;l>f;f++){for(b[f]={},b[f].target=j[f],b[f].target.style.transition="0.5s",b[f].sLength=parseInt(void 0===b[f].target.getAttribute("data-scroll-number")?1:b[f].target.getAttribute("data-scroll-number")),b[f].cssArr=arguments[f],h=0;h<b[f].cssArr.length;h++)for(o=b[f].cssArr[h].length,k=0;o>k;k++)e.test(b[f].cssArr[h][k].toString().replace(/\s+/g,""))&&(b[f].cssArr[h][k]=n(b[f].cssArr[h][k].toString().replace(/\s+/g,""))),p=["transform","animation"],p.forEach(function(a){var c,d;if(b[f].cssArr[h][k].toString().toLowerCase()===a)for(c=["webkit","ms"],a=a.replace(/(\w)/,function(a){return a.toUpperCase()}),d=0;d<c.length;d++)b[f].cssArr[h].push(c[d]+a),b[f].cssArr[h].push(b[f].cssArr[h][k+1]),b[f].cssArr[h].push(b[f].cssArr[h][k+2])});for(b[f].layers=[],h=0;h<b[f].target.childNodes.length;h++)1==b[f].target.childNodes[h].nodeType&&b[f].layers.push(b[f].target.childNodes[h]);for(b[f].childCount=b[f].cssArr.length,b[f].layers=b[f].layers.slice(0,b[f].childCount),b[f].sDuration=arguments[l]?arguments[l][f]:.2,b[f].attr=[],b[f].prop=[],b[f].propNum=[],b[f].propStr=[],h=0;h<b[f].childCount;h++){for(b[f].layers[h].style.transition=b[f].sDuration+"s",b[f].attr[h]=[],b[f].prop[h]=[],b[f].propNum[h]=[],b[f].propStr[h]=[],k=0;k<b[f].cssArr[h].length;k++)switch(k%3){case 0:b[f].attr[h].push(b[f].cssArr[h][k]),b[f].propNum[h][k/3]=[],b[f].propStr[h][k/3]=[];break;case 1:b[f].propNum[h][Math.floor(k/3)][0]=b[f].cssArr[h][k].toString().match(c),b[f].propStr[h][Math.floor(k/3)]=b[f].cssArr[h][k].toString().split(c);break;case 2:b[f].propNum[h][Math.floor(k/3)][1]=b[f].cssArr[h][k].toString().match(c)}for(k=0;k<b[f].cssArr[h].length/3;k++){for(b[f].delta=[],m=0;m<b[f].propNum[h][k][0].length;m++)b[f].delta[m]=(b[f].propNum[h][k][1][m]-b[f].propNum[h][k][0][m])/b[f].sLength;for(b[f].prop[h][k]=[],q=0;q<=b[f].sLength;q++)if(0===q)b[f].prop[h][k][q]=b[f].cssArr[h][3*k+1];else{for(b[f].prop[h][k][q]="",r=0;r<b[f].propNum[h][k][0].length;r++)b[f].prop[h][k][q]+=q===b[f].sLength?b[f].propStr[h][k][r]+b[f].propNum[h][k][1][r]:b[f].propStr[h][k].join("").indexOf("rgb")>-1?b[f].propStr[h][k][r]+Math.floor(parseFloat(b[f].propNum[h][k][0][r])+b[f].delta[r]*q):b[f].propStr[h][k][r]+(parseFloat(b[f].propNum[h][k][0][r])+b[f].delta[r]*q);b[f].prop[h][k][q]+=b[f].propStr[h][k][r]}}}}for(s=0,t=[],u=0,f=0;f<b.length-1;f++)u+=b[f].sLength,t.push(u+f+1);for(u+=b[b.length-1].sLength+b.length-1,document.addEventListener&&document.addEventListener("DOMMouseScroll",y,!1),document.onmousewheel=y,z=document.createElement("ul"),z.setAttribute("id","persp-controller"),f=0;f<b.length;f++)A=document.createElement("li"),B=document.createElement("div"),C=document.createElement("span"),A.style.listStyle="none",A.style.display="block",A.style.position="relative",B.style.height="8px",B.style.width="8px",B.style.border="1px solid #fff",B.style.backgroundColor="transparent",B.style.boxShadow="0 0 1px 1px #999",B.style.borderRadius="50%",B.style.margin="16px 0",B.style.transition="0.2s",B.style.cursor="pointer",C.innerHTML=b[f].target.getAttribute("data-scroll-tag"),C.style.color="#777",C.style.font="12px arial",C.style.padding="2px 10px",C.style.backgroundColor="rgba(255,255,255,0.8)",C.style.borderRadius="4px",C.style.position="absolute",C.style.left="15px",C.style.top="-4px",C.style.transition="0.2s",C.style.opacity="0",A.appendChild(B),A.appendChild(C),z.appendChild(A);z.style.position="absolute",z.style.left="2%",z.style.top="50%",z.style.marginTop=-1*(13*b.length+8)+"px",z.style.zIndex=1e3,b[0].target.parentNode.parentNode.appendChild(z),w(0,0)};